<div class="row " style="align-content: center; align-items: center; align-self: center;">
    <div class="col-md-8 ">
        <div class="card">
            <div class="card-header card-header-info">
                <h4 id="txtTitulo" class="card-title">Registro de nuevo destino</h4>
            </div>
            <div class="card-body">
                <form [(formGroup)]="tourForm" (ngSubmit)="onSubmit()">
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="inputPassword4">Codigo</label>
                            <input type="text" class="form-control" formControlName="codigo" [ngClass]="{ 'is-invalid': submitted  && getControl.codigo.errors  }">
                            <div *ngIf="submitted && getControl.codigo.errors" class="invalid-feedback">
                                <div *ngIf="getControl.codigo.errors.required">Ingrese un codigo </div>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="inputPassword4">Activo</label>
                            <select class="form-control" formControlName="activo" id="exampleFormControlSelect1" [ngClass]="{ 'is-invalid': submitted  && getControl.activo.errors  }">
                            <option *ngFor="let item of activo" value="{{item.id}}">{{item.activo}}</option>
                            </select>
                            <div *ngIf="submitted && getControl.activo.errors" class="invalid-feedback">
                                <div *ngIf="getControl.activo.errors.required">Seleccione estado </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="inputEmail4">Nombre</label>
                            <input type="text" class="form-control" formControlName="nombre" [ngClass]="{ 'is-invalid': submitted  && getControl.nombre.errors  }">
                            <div *ngIf="submitted && getControl.nombre.errors" class="invalid-feedback">
                                <div *ngIf="getControl.nombre.errors.required">Ingrese un nombre</div>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="inputPassword4">Estado</label>
                            <select class="form-control" formControlName="estado" [ngClass]="{ 'is-invalid': submitted  && getControl.estado.errors  }">
                                <option value="{{item.nombre}}" *ngFor="let item of estado">
                                  {{item.nombre}}
                                </option>
                              </select>
                            <div *ngIf="submitted && getControl.estado.errors" class="invalid-feedback">
                                <div *ngIf="getControl.estado.errors.required">Seleccione estado</div>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="inputEmail4">Idioma</label>
                            <input type="text" class="form-control" formControlName="idioma" [ngClass]="{ 'is-invalid': submitted  && getControl.idioma.errors  }">
                            <div *ngIf="submitted && getControl.idioma.errors" class="invalid-feedback">
                                <div *ngIf="getControl.idioma.errors.required">Ingrese idioma</div>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="inputPassword4">Cantidad de personas</label>
                            <input type="text" class="form-control" formControlName="cantidad" [ngClass]="{ 'is-invalid': submitted  && getControl.cantidad.errors  }">
                            <div *ngIf="submitted && getControl.cantidad.errors" class="invalid-feedback">
                                <div *ngIf="getControl.cantidad.errors.required">Ingrese cantidad</div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="form-row">
                        <div class="form-group col-md">
                            <label>Descripcion</label>
                            <textarea class="form-control" formControlName="descripcion" placeholder="Ingrese una breve descripcion" [ngClass]="{ 'is-invalid': submitted  && getControl.descripcion.errors  }"></textarea>
                            <div *ngIf="submitted && getControl.descripcion.errors" class="invalid-feedback">
                                <div *ngIf="getControl.descripcion.errors.required">Ingrese una breve descripcion</div>
                            </div>
                        </div>
                    </div>
                    <br>

                    <div class="form-row text-center">
                        <div class="form-group text-center col-md-6">
                            <button style="width: 200px;" type="button" class="btn btn-default modal-title" data-toggle="modal" data-target="#ModaFilePDF" (click)="SubirPDFModal()" [ngClass]="{ 'is-invalid': submitted  && getControl.pdf.errors  }">
                                <span> <i class="fas fa-upload"></i> Subir PDF</span>
                            </button>
                            <div *ngIf="submitted && getControl.pdf.errors" class="invalid-feedback">
                                <div *ngIf="getControl.pdf.errors.required">Suba algun pdf </div>
                            </div>
                        </div>

                        <div class="form-group text-center col-md-6">
                            <button style="width: 200px;" type="button" class="btn btn-default modal-title" data-toggle="modal" data-target="#ModaFileFoto" (click)="SubirFotoModal()" [ngClass]="{ 'is-invalid': submitted  && getControl.foto.errors  }">
                            <span> <i class="fas fa-upload"></i> Subir Foto</span>
                            </button>
                            <div *ngIf="submitted && getControl.foto.errors" class="invalid-feedback">
                                <div *ngIf="getControl.foto.errors.required">Suba alguna foto </div>
                            </div>
                        </div>

                    </div>
                    <br>
                    <mat-radio-group aria-labelledby="example-radio-group-label" class="example-radio-group">
                        <mat-radio-button class="example-radio-button" [checked]="f_fija" (change)="f_fija=!f_fija" [value]="1">
                            Solo un día
                        </mat-radio-button>
                        <mat-radio-button class="example-radio-button" [checked]="!f_fija" (change)="f_fija=!f_fija" [value]="0">
                            Varios días
                        </mat-radio-button>
                    </mat-radio-group>

                    <div *ngIf="!f_fija" class="form-row">
                        <div class="form-group col-md-6">
                            <label for="inputCity">Fecha inicio</label>
                            <input class="form-control" type="date" formControlName="inicio">
                        </div>
                        <div class="form-group col-md-6">
                            <label for="inputCity">Fecha final</label>
                            <input class="form-control" type="date" formControlName="final">
                        </div>
                    </div>
                    <div *ngIf="f_fija" class="form-row">
                        <div class="form-group col-md-6">
                            <label for="inputPassword4">Fecha fija</label>
                            <input class="form-control" type="date" formControlName="fecha_fija">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="inputEmail4">Duracion (días)</label>
                            <input type="text" class="form-control" formControlName="duracion" [ngClass]="{ 'is-invalid': submitted  && getControl.duracion.errors  }">
                            <div *ngIf="submitted && getControl.duracion.errors" class="invalid-feedback">
                                <div *ngIf="getControl.duracion.errors.required">Ingres tiempo de duracion </div>
                            </div>
                        </div>
                    </div>
                    <br>

                    <div class="form-group  text-center">
                        <label>Destino</label>
                        <select name="Destino[]" id="selectDestino" class="form-control" style="width:100%" formControlName="destino_id" [ngClass]="{ 'is-invalid': submitted  && getControl.destino_id.errors  }">
                        </select>
                        <div *ngIf="submitted && getControl.destino_id.errors" class="invalid-feedback">
                            <div *ngIf="getControl.destino_id.errors.required">Seleccione destino </div>
                        </div>
                    </div>

                    <div class="form-group  text-center">
                        <label>Etiqueta</label>
                        <select multiple name="Etiqueta[]" id="selectEtiqueta" class="form-control" style="width:100%" formControlName="etiqueta_id" [ngClass]="{ 'is-invalid': submitted  && getControl.etiqueta_id.errors  }">
                        </select>
                        <div *ngIf="submitted && getControl.etiqueta_id.errors" class="invalid-feedback">
                            <div *ngIf="getControl.etiqueta_id.errors.required">Seleccione alguna etiqueta </div>
                        </div>
                    </div>


                    <br>
                    <button (click)="createditTour()" ctype="submit" class="btn btn-primary pull-right">Guardar</button>
                    <div class="clearfix"></div>
                </form>
            </div>
        </div>
    </div>
</div>




<!--modal para subir pdf-->
<div class="modal fade" id="ModaFilePDF" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <!--contendio-->
        <div class="modal-content" style="border-radius: 15px !important;">
            <!--end contendio-->
            <div class="container-fluid ">
                <div class="row ">

                    <!--Div -->
                    <div class="col-md-12 d-none d-md-block bg-cover rounded-left">
                        <br>
                        <div class="col-md-12 m-b-30">
                            <div class="titulo2">
                                Adjuntar PDF
                            </div>
                        </div>
                        <ngx-dropzone #dropzone id="dropzone" label="Arrastrar archivos o dar click" [accept]="'application/pdf'" [multiple]="false" [showPreviews]="true" class="custom-dropzone" (filesAdded)="onFilesAddedPDF($event,dropzone)">
                        </ngx-dropzone>
                        <br>
                        <div class="col-md-12 m-b-30" *ngIf="pdfSinGuardar.length>0">
                            <h5>PDF</h5>
                            <div class="table-responsive">
                                <table class="table align-td-middle table-card">
                                    <thead>
                                        <tr>
                                            <th>Nombre</th>
                                            <th>Progreso</th>
                                            <th>Accion</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let file of pdfSinGuardar ; let i =index">
                                            <td>{{file.nombre}}</td>
                                            <td>
                                                <div class="progress" style="margin-bottom: 0;">
                                                    <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': progresspdf + '%' }"></div>
                                                </div>
                                            </td>
                                            <td>
                                                <button type="button" class="btn btn-danger btn-xs" (click)="removePdf(i)">
                                                <span><i class="fas fa-trash-alt"></i></span>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="form-group col-md-8">
                            <button type="button" class="btn btn-secondary" style="background-color: #92929D;" data-dismiss="modal" (click)="cancelarPdf()" (click)="dropzone.reset()">
                                Cancelar
                            </button>
                            <button class="btn btn-primary" style="background-color: #0062FF;" [disabled]="!(pdfSinGuardar.length>0)" data-dismiss="modal" (click)="guardarPdf()">Guardar</button>
                        </div>
                    </div>
                    <!--end Div -->
                </div>
            </div>
        </div>
    </div>
</div>
<!--End Modal para subir pdf -->


<!--modal para subir foto-->
<div class="modal fade" id="ModaFileFoto" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <!--contendio-->
        <div class="modal-content" style="border-radius: 15px !important;">
            <!--end contendio-->
            <div class="container-fluid ">
                <div class="row ">

                    <!--Div -->
                    <div class="col-md-12 d-none d-md-block bg-cover rounded-left">
                        <br>
                        <div class="col-md-12 m-b-30">
                            <div class="titulo2">
                                Adjuntar Foto
                            </div>
                        </div>
                        <ngx-dropzone #dropzone id="dropzone" label="Arrastrar archivos o dar click" [accept]="'image/png, image/jpg, image/jpeg, image/PNG'" [multiple]="false" [showPreviews]="true" class="custom-dropzone" (filesAdded)="onFilesAddedFoto($event,dropzone)">
                        </ngx-dropzone>
                        <br>
                        <div class="col-md-12 m-b-30" *ngIf="fotoSinGuardar.length>0">
                            <h5>Foto</h5>
                            <div class="table-responsive">
                                <table class="table align-td-middle table-card">
                                    <thead>
                                        <tr>
                                            <th>Nombre</th>
                                            <th>Progreso</th>
                                            <th>Accion</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let file of fotoSinGuardar ; let i =index">
                                            <td>{{file.nombre}}</td>
                                            <td>
                                                <div class="progress" style="margin-bottom: 0;">
                                                    <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': progressfoto + '%' }"></div>
                                                </div>
                                            </td>
                                            <td>
                                                <button type="button" class="btn btn-danger btn-xs" (click)="removeFoto(i)">
                                                    <span><i class="fas fa-trash-alt"></i></span>
                                                    </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="form-group col-md-8">
                            <button type="button" class="btn btn-secondary" style="background-color: #92929D;" data-dismiss="modal" (click)="cancelarFoto()" (click)="dropzone.reset()">
                                    Cancelar
                                </button>
                            <button class="btn btn-primary" style="background-color: #0062FF;" [disabled]="!(fotoSinGuardar.length>0)" data-dismiss="modal" (click)="guardarFoto()">Guardar</button>
                        </div>
                    </div>
                    <!--end Div -->
                </div>
            </div>
        </div>
    </div>
</div>
<!--End Modal para subir foto -->